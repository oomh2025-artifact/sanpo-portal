<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <title>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ - SANPO PORTAL</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --bg: #ffffff;
      --bg-secondary: #fafafa;
      --text: #18181b;
      --text-muted: #71717a;
      --text-light: #a1a1aa;
      --border: #e4e4e7;
      --border-light: #f4f4f5;
      --accent-1: #6366f1;
      --accent-2: #8b5cf6;
      --accent-3: #ec4899;
    }
    body { 
      font-family: "Inter", "Noto Sans JP", -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }
    header {
      position: fixed; top: 0; left: 0; right: 0;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-light);
      z-index: 100;
    }
    .header-inner {
      max-width: 1200px; margin: 0 auto;
      padding: 18px 40px;
      display: flex; justify-content: space-between; align-items: center;
    }
    .logo {
      font-size: 1rem; font-weight: 600; letter-spacing: 0.02em;
      color: var(--text); text-decoration: none;
      display: flex; align-items: center; gap: 10px;
    }
    .logo-icon {
      width: 32px; height: 32px;
      background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 100%);
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
    }
    .logo-icon svg { width: 18px; height: 18px; color: white; }
    nav { display: flex; gap: 36px; }
    nav a {
      font-size: 0.875rem; font-weight: 450; color: var(--text-muted);
      text-decoration: none; transition: color 0.2s;
    }
    nav a:hover, nav a.active { color: var(--text); }
    main { max-width: 1200px; margin: 0 auto; padding: 120px 40px 80px; }
    @media (max-width: 768px) {
      .header-inner { padding: 14px 20px; }
      nav { gap: 20px; }
      nav a { font-size: 0.8rem; }
      main { padding: 100px 20px 60px; }
    }

    .page-header {
      padding: 40px 0 40px;
    }
    .page-header h1 {
      font-size: clamp(1.75rem, 3vw, 2.5rem);
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 12px;
    }
    .page-header p {
      font-size: 1rem;
      color: var(--text-muted);
    }
    .search-box {
      background: var(--bg-secondary);
      border-radius: 20px;
      padding: 32px;
      margin-bottom: 32px;
    }
    .search-input-wrap {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }
    .search-input {
      flex: 1;
      padding: 14px 20px;
      font-size: 1rem;
      border: 1px solid var(--border);
      border-radius: 12px;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
      font-family: inherit;
    }
    .search-input:focus {
      border-color: var(--accent-1);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }
    .search-btn {
      padding: 14px 28px;
      background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .search-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }
    .search-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .search-options {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .search-options label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.9rem;
      color: var(--text-muted);
      cursor: pointer;
    }
    .search-options input[type="radio"] {
      accent-color: var(--accent-1);
    }
    .synonyms-info {
      margin-top: 16px;
      padding: 12px 16px;
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
      border-radius: 10px;
      font-size: 0.85rem;
      color: var(--accent-1);
      display: none;
    }
    .synonyms-info.show {
      display: block;
    }
    .synonyms-info .ai-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
      color: white;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
      margin-right: 8px;
    }
    .synonyms-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }
    .synonym-tag {
      background: white;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 0.8rem;
      color: var(--text);
      border: 1px solid var(--border);
    }
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border-light);
    }
    .results-count {
      font-size: 0.95rem;
      color: var(--text-muted);
    }
    .result-item {
      display: block;
      padding: 20px 24px;
      background: var(--bg);
      border: 1px solid var(--border-light);
      border-radius: 14px;
      margin-bottom: 12px;
      text-decoration: none;
      color: inherit;
      transition: all 0.2s;
    }
    .result-item:hover {
      border-color: var(--accent-1);
      box-shadow: 0 4px 20px rgba(99, 102, 241, 0.1);
      transform: translateY(-2px);
    }
    .result-title {
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 8px;
      line-height: 1.5;
    }
    .result-title mark {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
      color: var(--accent-1);
      padding: 1px 4px;
      border-radius: 3px;
    }
    .result-meta {
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    .result-journal {
      display: inline-block;
      background: var(--bg-secondary);
      padding: 3px 10px;
      border-radius: 5px;
      margin-right: 10px;
      font-weight: 500;
    }
    .no-results {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }
    .no-results h3 {
      font-size: 1.2rem;
      margin-bottom: 8px;
      color: var(--text);
    }
    .initial-state {
      text-align: center;
      padding: 80px 20px;
      color: var(--text-light);
    }
    .initial-state svg {
      width: 64px;
      height: 64px;
      margin-bottom: 16px;
      opacity: 0.3;
    }
    .loading-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--border);
      border-top-color: var(--accent-1);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 16px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .mode-description {
      font-size: 0.8rem;
      color: var(--text-light);
      margin-top: 12px;
      padding: 10px 14px;
      background: var(--bg);
      border-radius: 8px;
      border: 1px solid var(--border-light);
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <a href="index.html" class="logo">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
          </svg>
        </div>
        SANPO PORTAL
      </a>
      <nav>
        <a href="index.html">ãƒ›ãƒ¼ãƒ </a>
        <a href="journals.html">å­¦è¡“èªŒ</a>
        <a href="articles.html">è«–æ–‡</a>
        <a href="seido.html">åˆ¶åº¦</a>
        <a href="search.html" class="active">æ¤œç´¢</a>
      </nav>
    </div>
  </header>
  
  <main>
    <div class="page-header">
      <h1>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢</h1>
      <p>ç”£æ¥­ä¿å¥é–¢é€£ã®è«–æ–‡ã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¨ªæ–­æ¤œç´¢</p>
    </div>
    
    <div class="search-box">
      <div class="search-input-wrap">
        <input type="text" id="searchInput" class="search-input" placeholder="ä¾‹ï¼šãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ã€ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯ã€å¾©è·æ”¯æ´">
        <button onclick="doSearch()" id="searchBtn" class="search-btn">æ¤œç´¢</button>
      </div>
      <div class="search-options">
        <label>
          <input type="radio" name="searchMode" value="exact"> å®Œå…¨ä¸€è‡´
        </label>
        <label>
          <input type="radio" name="searchMode" value="static" checked> ã‚·ã‚½ãƒ¼ãƒ©ã‚¹æ¤œç´¢ï¼ˆå¾“æ¥ç‰ˆï¼‰
        </label>
        <label>
          <input type="radio" name="searchMode" value="ai"> ğŸ¤– AIæ‹¡å¼µæ¤œç´¢
        </label>
      </div>
      <div class="mode-description" id="modeDescription">
        ã‚·ã‚½ãƒ¼ãƒ©ã‚¹æ¤œç´¢ï¼šäº‹å‰å®šç¾©ã•ã‚ŒãŸé¡ç¾©èªè¾æ›¸ã‚’ä½¿ç”¨ã—ã¦é–¢é€£èªã‚‚æ¤œç´¢ã—ã¾ã™
      </div>
      <div id="synonymsInfo" class="synonyms-info"></div>
    </div>
    
    <div id="resultsArea">
      <div class="initial-state">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
        <p>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦æ¤œç´¢ã—ã¦ãã ã•ã„</p>
      </div>
    </div>
  </main>
  
  <script>
    const articles = [{"title": "ç‰¹å®šå¥åº·è¨ºæŸ»ã«ç”¨ã„ã‚‰ã‚Œã‚‹ä¸»è¦³çš„ãªå’€åš¼çŠ¶æ…‹ã«é–¢ã™ã‚‹è³ªå•é …ç›®ã¨ç”·æ€§å‹¤åŠ´è€…ã«ãŠã‘ã‚‹å£è…”çŠ¶æ…‹ã®é–¢é€£æ€§", "authors": ["è°· ç›´é“", "åŸ´å²¡ éš†", "æ¨‹å£ å–„ä¹‹", "å¤ªç”° é›…è¦", "å±±æœ¬ è‰¯å­"], "journal": "ç”£æ¥­è¡›ç”Ÿå­¦é›‘èªŒ", "year": "2023", "volume": "65", "number": "1", "link": "https://www.jstage.jst.go.jp/article/sangyoeisei/65/1/65_2021-027-B/_article/-char/ja/"}, {"title": "åŒ»ç™‚æ©Ÿé–¢è·å“¡ã®æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚£ãƒ«ã‚¹ï¼ˆSARS-CoV-2ï¼‰ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®ç›´å¾Œã‹ã‚‰ç´„3ãƒ¶æœˆå¾ŒåŠã³9ãƒ¶æœˆå¾Œã®ã‚¹ãƒ‘ã‚¤ã‚¯è›‹ç™½ç‰¹ç•°çš„IgGæŠ—ä½“ã®ä¿æœ‰çŠ¶æ³ã«ã¤ã„ã¦ã®èª¿æŸ»", "authors": ["å®®å³¶ æ±Ÿé‡Œå­", "ä»Šæ³‰ å¼˜", "æŠ¼ç”° å°ç™¾åˆ", "äº”ååµ æ•¬å­", "å‰ç”° å®—ç´€"], "journal": "ç”£æ¥­è¡›ç”Ÿå­¦é›‘èªŒ", "year": "2023", "volume": "65", "number": "1", "link": "https://www.jstage.jst.go.jp/article/sangyoeisei/65/1/65_2021-039-B/_article/-char/ja/"}, {"title": "äºˆé˜²ãƒ»è‡¨åºŠåŒ»å­¦ç†è«–ã¨å®Ÿè·µä½“ç³»ã«ãŠã‘ã‚‹ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å…ç–«æ¯’æ€§åˆ¶å¾¡ï¼š1ï¼è·æ¥­ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã¨ã‚¤ã‚½ã‚·ã‚¢ãƒãƒ¼ãƒˆå–˜æ¯", "authors": ["æ—¥æœ¬ç”£æ¥­è¡›ç”Ÿå­¦ä¼šã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼å…ç–«æ¯’æ€§ç ”ç©¶ä¼š", "åœŸæ©‹ é‚¦ç”Ÿ", "å‰ç”° è²´å½¦", "æ£®æœ¬ æ³°å¤«", "ä¸Šç”° åš"], "journal": "ç”£æ¥­è¡›ç”Ÿå­¦é›‘èªŒ", "year": "2023", "volume": "65", "number": "1", "link": "https://www.jstage.jst.go.jp/article/sangyoeisei/65/1/65_2021-040-A/_article/-char/ja/"}, {"title": "ç–¾ç—…ã‚’æŠ±ãˆã‚‹åŠ´åƒè€…ã®æ²»ç™‚ã¨ä»•äº‹ã®ä¸¡ç«‹æ”¯æ´ã®å–ã‚Šçµ„ã¿çŠ¶æ³ï¼šå’Œæ­Œå±±çœŒå†…äº‹æ¥­å ´ã®è¦æ¨¡åˆ¥æ¯”è¼ƒã‹ã‚‰", "authors": ["æ£®å²¡ éƒæ™´", "å¯ºä¸‹ æµ©å½°", "å®®ä¸‹ å’Œä¹…", "ç”Ÿç”° å–„å¤ªéƒ", "ç«¹ä¸‹ é”ä¹Ÿ"], "journal": "ç”£æ¥­è¡›ç”Ÿå­¦é›‘èªŒ", "year": "2023", "volume": "65", "number": "1", "link": "https://www.jstage.jst.go.jp/article/sangyoeisei/65/1/65_2021-051-E/_article/-char/ja/"}, {"title": "ç‰¹åˆ¥å‰‡ã®å»ƒæ­¢ã¯è·å ´ç’°å¢ƒè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã«ä½•ã‚’ã‚‚ãŸã‚‰ã™ã®ã‹", "authors": ["ç†Šè°· ä¿¡äºŒ"], "journal": "ç”£æ¥­è¡›ç”Ÿå­¦é›‘èªŒ", "year": "2023", "volume": "65", "number": "1", "link": "https://www.jstage.jst.go.jp/article/sangyoeisei/65/1/65_2022-004-W/_article/-char/ja/"}, {"title": "Shinichi IWASAKI", "authors": ["Shinichi IWASAKI", "Yasuhiko DEGUCHI", "Tomoyuki HIROTA", "Yoshiki SHIRAHAMA", "Yoko NAKAMICHI"], "journal": "Industrial Health", "year": "2023", "volume": "61", "number": "1", "link": "https://www.jstage.jst.go.jp/article/indhealth/61/1/61_2021-0169/_article/-char/ja/"}, {"title": "Kazunori IKEGAMI", "authors": ["Kazunori IKEGAMI", "Hajime ANDO", "Hisashi EGUCHI", "Mayumi TSUJI", "Seiichiro TATEISHI"], "journal": "Industrial Health", "year": "2023", "volume": "61", "number": "1", "link": "https://www.jstage.jst.go.jp/article/indhealth/61/1/61_2021-0250/_article/-char/ja/"}, {"title": "Min-Woo NAM", "authors": ["Min-Woo NAM", "Jinjoo CHUNG", "Soyoung PARK", "Woncheol LEE", "Jihoon PARK"], "journal": "Industrial Health", "year": "2023", "volume": "61", "number": "1", "link": "https://www.jstage.jst.go.jp/article/indhealth/61/1/61_2021-0271/_article/-char/ja/"}, {"title": "Yukihiro SATO", "authors": ["Yukihiro SATO", "Eiji YOSHIOKA", "Masanori TAKEKAWA", "Yasuaki SAIJO"], "journal": "Industrial Health", "year": "2023", "volume": "61", "number": "1", "link": "https://www.jstage.jst.go.jp/article/indhealth/61/1/61_2021-0274/_article/-char/ja/"}, {"title": "Tianchang JI", "authors": ["Tianchang JI", "Jan DE JONGE", "Toon W. TARIS", "Norito KAWAKAMI", "Maria C.W. PEETERS"], "journal": "Industrial Health", "year": "2023", "volume": "61", "number": "1", "link": "https://www.jstage.jst.go.jp/article/indhealth/61/1/61_2021-0276/_article/-char/ja/"}, {"title": "åŠ ç†±å¼ã‚¿ãƒã‚³ã®ç™ºãŒã‚“æ€§è©•ä¾¡ã®æœ€æ–°å‹•å‘", "authors": ["å±±å£ ç›´äºº"], "journal": "ç”£æ¥­åŒ»å­¦ãƒ¬ãƒ“ãƒ¥ãƒ¼", "year": "2023", "volume": "35", "number": "3", "link": "https://www.jstage.jst.go.jp/article/ohpfrev/35/3/35_1/_article/-char/ja/"}, {"title": "ç½å®³ã¨ç”£æ¥­ä¿å¥", "authors": ["ç«‹çŸ³ æ¸…ä¸€éƒ", "äº”ååµ ä¾‘"], "journal": "ç”£æ¥­åŒ»å­¦ãƒ¬ãƒ“ãƒ¥ãƒ¼", "year": "2023", "volume": "35", "number": "3", "link": "https://www.jstage.jst.go.jp/article/ohpfrev/35/3/35_125/_article/-char/ja/"}, {"title": "é›»é›¢æ”¾å°„ç·šã®æ­´å²ã‹ã‚‰å­¦ã¶æ”¾å°„ç·šé˜²è­·", "authors": ["å²¡ï¨‘ é¾å²"], "journal": "ç”£æ¥­åŒ»å­¦ãƒ¬ãƒ“ãƒ¥ãƒ¼", "year": "2023", "volume": "36", "number": "1", "link": "https://www.jstage.jst.go.jp/article/ohpfrev/36/1/36_1/_article/-char/ja/"}, {"title": "ã€Œé¨’éŸ³éšœå®³é˜²æ­¢ã®ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã®è¦‹ç›´ã—ã®èƒŒæ™¯ã¨ä¸»ãªãƒã‚¤ãƒ³ãƒˆ", "authors": ["å’Œç”° å“²éƒ"], "journal": "ç”£æ¥­åŒ»å­¦ãƒ¬ãƒ“ãƒ¥ãƒ¼", "year": "2023", "volume": "36", "number": "1", "link": "https://www.jstage.jst.go.jp/article/ohpfrev/36/1/36_30/_article/-char/ja/"}, {"title": "ã‚¤ãƒ³ã‚¸ã‚¦ãƒ è‚ºï¼šé›£æº¶æ€§ã‚¤ãƒ³ã‚¸ã‚¦ãƒ ç²‰å¡µæ›éœ²ã«ã‚ˆã‚‹ãƒ’ãƒˆè‚ºéšœå®³", "authors": ["å¤§å‰ å’Œå¹¸", "ä¸­é‡ çœŸè¦å­", "ç”°ä¸­ æ˜­ä»£", "å¹³ç”° ç¾ç”±ç´€", "æµœå£ ä¼åš"], "journal": "ç”£æ¥­åŒ»å­¦ãƒ¬ãƒ“ãƒ¥ãƒ¼", "year": "2023", "volume": "36", "number": "1", "link": "https://www.jstage.jst.go.jp/article/ohpfrev/36/1/36_50/_article/-char/ja/"}, {"title": "ç‰¹é›†ã«ã‚ãŸã£ã¦", "authors": ["åŠ è—¤ æ†²å¿ "], "journal": "ç”£æ¥­ç²¾ç¥ä¿å¥", "year": "2023", "volume": "31", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jjomh/31/1/31_1/_article/-char/ja/"}, {"title": "æ›´å¹´æœŸéšœå®³ã¨åŠ´åƒ", "authors": ["å°å· çœŸé‡Œå­"], "journal": "ç”£æ¥­ç²¾ç¥ä¿å¥", "year": "2023", "volume": "31", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jjomh/31/1/31_15/_article/-char/ja/"}, {"title": "å­è‚²ã¦ã‚’ã—ãªãŒã‚‰åƒãå¥³æ€§ã®ã‚¹ãƒˆãƒ¬ã‚¹ã¨ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹", "authors": ["ä½ã€…æœ¨ é‚£æ´¥"], "journal": "ç”£æ¥­ç²¾ç¥ä¿å¥", "year": "2023", "volume": "31", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jjomh/31/1/31_21/_article/-char/ja/"}, {"title": "å¥³æ€§ã®ã‚µã‚¹ãƒ†ã‚¤ãƒŠãƒ–ãƒ«ãªåƒãæ–¹ã«å¿…è¦ãªã‚‚ã®ã¯ä½•ã‹", "authors": ["è¾» å¥ˆæ´¥å­"], "journal": "ç”£æ¥­ç²¾ç¥ä¿å¥", "year": "2023", "volume": "31", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jjomh/31/1/31_25/_article/-char/ja/"}, {"title": "åƒãå¥³æ€§ã¨æœˆçµŒå‰ç—‡å€™ç¾¤", "authors": ["æ±Ÿå· ç¾ä¿"], "journal": "ç”£æ¥­ç²¾ç¥ä¿å¥", "year": "2023", "volume": "31", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jjomh/31/1/31_3/_article/-char/ja/"}, {"title": "ç”£æ¥­çœ‹è­·è·ã¨è‡¨åºŠçœ‹è­·è·ã¨ã®æ²»ç™‚ã¨ä»•äº‹ã®ä¸¡ç«‹æ”¯æ´ã«ãŠã‘ã‚‹é€£æºã®ä»•çµ„ã¿ã¥ãã‚Š", "authors": ["æ²³é‡ å•“å­", "æ‰å´ ä¸€ç¾", "å¾Œè—¤ ç”±ç´€", "ç•‘ä¸­ ä¸‰åƒä»£", "åŠ è—¤ ç¦ç¾"], "journal": "æ—¥æœ¬ç”£æ¥­çœ‹è­·å­¦ä¼šèªŒ", "year": "2023", "volume": "10", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jaohn/10/1/10_1/_article/-char/ja/"}, {"title": "ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤æ³•ã‚’ç”¨ã„ãŸèª¿æŸ»ã«ã‚ˆã‚‹ä»Šå¾Œã®æ—¥æœ¬ç”£æ¥­çœ‹è­·å­¦ä¼šã®ã‚ã‚Šæ–¹ã«é–¢ã™ã‚‹ä¼šå“¡ã®ãƒ‹ãƒ¼ã‚º", "authors": ["é‡‘æ£® æ‚Ÿ", "å®‡éƒ½å®® åƒæ˜¥", "çŸ³å€‰ æ­å­", "ç§‹å…ƒ å²æµ", "é³¥ç¾½å±± ç¦å­"], "journal": "æ—¥æœ¬ç”£æ¥­çœ‹è­·å­¦ä¼šèªŒ", "year": "2023", "volume": "10", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jaohn/10/1/10_11/_article/-char/ja/"}, {"title": "ç”£æ¥­çœ‹è­·ã®å®šç¾©", "authors": ["æ²³é‡ å•“å­"], "journal": "æ—¥æœ¬ç”£æ¥­çœ‹è­·å­¦ä¼šèªŒ", "year": "2023", "volume": "10", "number": "2", "link": "https://www.jstage.jst.go.jp/article/jaohn/10/2/10_21/_article/-char/ja/"}, {"title": "ä¼æ¥­ã®å¥åº·æ–½ç­–æ±ºå®šãƒ—ãƒ­ã‚»ã‚¹ã«é–¢ä¸ã™ã‚‹ç”£æ¥­çœ‹è­·è·ã«å¿…è¦ãªã‚³ãƒ³ãƒ”ãƒ†ãƒ³ã‚·ãƒ¼", "authors": ["å…ƒç”° ç´€å­", "é‡‘æ£® æ‚Ÿ", "ç¦ç”° å‰æ²»"], "journal": "æ—¥æœ¬ç”£æ¥­çœ‹è­·å­¦ä¼šèªŒ", "year": "2023", "volume": "10", "number": "2", "link": "https://www.jstage.jst.go.jp/article/jaohn/10/2/10_23/_article/-char/ja/"}, {"title": "ç”£æ¥­çœ‹è­·è·ã«ã‚ˆã‚‹ç”Ÿæ´»ç¿’æ…£ç—…äºˆé˜²ãƒ»æ”¹å–„ã‚’ç›®çš„ã¨ã—ãŸç¡çœ ä¿å¥æŒ‡å°ã®å®Ÿæ…‹", "authors": ["æ´¥æ‘ ç¾é‡Œ", "å’Œæ³‰ æ¯”ä½å­"], "journal": "æ—¥æœ¬ç”£æ¥­çœ‹è­·å­¦ä¼šèªŒ", "year": "2023", "volume": "10", "number": "2", "link": "https://www.jstage.jst.go.jp/article/jaohn/10/2/10_34/_article/-char/ja/"}, {"title": "å‰¯æ¥­ãƒ»å…¼æ¥­ã‚’ã‚ãã‚‹2020å¹´åŠ´ç½ä¿é™ºæ³•æ”¹æ­£", "authors": ["å±±æœ¬ é™½å¤§"], "journal": "ç”£æ¥­ä¿å¥æ³•å­¦ä¼šèªŒ", "year": "2023", "volume": "2", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jaohl/2/1/2_10/_article/-char/ja/"}, {"title": "å€‹åˆ¥åŒ–åŒ»ç™‚ã®ç¾çŠ¶ã¨ã€ è·å ´ã«ãŠã‘ã‚‹éºä¼æƒ…å ±ã®äº‹ä¾‹æ¤œè¨", "authors": ["æ³‰ é™½å­"], "journal": "ç”£æ¥­ä¿å¥æ³•å­¦ä¼šèªŒ", "year": "2023", "volume": "2", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jaohl/2/1/2_101/_article/-char/ja/"}, {"title": "ç”£æ¥­åŒ»ã®ç«‹å ´ã‹ã‚‰ã®æ¤œè¨", "authors": ["ç«‹é“ æ˜Œå¹¸"], "journal": "ç”£æ¥­ä¿å¥æ³•å­¦ä¼šèªŒ", "year": "2023", "volume": "2", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jaohl/2/1/2_108/_article/-char/ja/"}, {"title": "æ³•å¾‹å®¶ã®ç«‹å ´ã‹ã‚‰", "authors": ["è°å£ é«˜å¿—"], "journal": "ç”£æ¥­ä¿å¥æ³•å­¦ä¼šèªŒ", "year": "2023", "volume": "2", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jaohl/2/1/2_112/_article/-char/ja/"}, {"title": "å‰å‘ãã‚²ãƒãƒ ã‚³ãƒ›ãƒ¼ãƒˆå‚åŠ è€…ã‚’å¯¾è±¡ã¨ã—ãŸéºä¼æ€§ä¹³ãŒã‚“åµå·£ãŒã‚“ã®éºä¼æƒ…å ±å›ä»˜", "authors": ["å¤§æ ¹ç”° çµ¹å­"], "journal": "ç”£æ¥­ä¿å¥æ³•å­¦ä¼šèªŒ", "year": "2023", "volume": "2", "number": "1", "link": "https://www.jstage.jst.go.jp/article/jaohl/2/1/2_121/_article/-char/ja/"}];
    
    // é™çš„ã‚·ã‚½ãƒ¼ãƒ©ã‚¹ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
    const thesaurus = {"ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹": ["ç²¾ç¥ä¿å¥", "å¿ƒã®å¥åº·", "ãƒ¡ãƒ³ã‚¿ãƒ«", "mental health", "ç²¾ç¥è¡›ç”Ÿ"], "ã‚¹ãƒˆãƒ¬ã‚¹ãƒã‚§ãƒƒã‚¯": ["ã‚¹ãƒˆãƒ¬ã‚¹èª¿æŸ»", "å¿ƒç†çš„è² æ‹…", "è·æ¥­æ€§ã‚¹ãƒˆãƒ¬ã‚¹", "stress check"], "ã‚¹ãƒˆãƒ¬ã‚¹": ["å¿ƒç†çš„è² æ‹…", "ç²¾ç¥çš„è² æ‹…", "ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼", "stress", "ç·Šå¼µ"], "éé‡åŠ´åƒ": ["é•·æ™‚é–“åŠ´åƒ", "éåŠ´", "overwork", "æ™‚é–“å¤–åŠ´åƒ", "æ®‹æ¥­"], "å¥åº·è¨ºæ–­": ["å¥è¨º", "å¥åº·è¨ºæŸ»", "ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯", "å®šæœŸå¥è¨º", "health examination"], "ç”£æ¥­åŒ»": ["äº‹æ¥­å ´åŒ»å¸«", "å˜±è¨—åŒ»", "occupational physician"], "ç”£æ¥­ä¿å¥": ["è·åŸŸä¿å¥", "åŠ´åƒè¡›ç”Ÿ", "occupational health", "è·å ´ã®å¥åº·"], "å¾©è·æ”¯æ´": ["ãƒªãƒ¯ãƒ¼ã‚¯", "è·å ´å¾©å¸°æ”¯æ´", "å¾©å¸°æ”¯æ´", "return to work"], "è·å ´å¾©å¸°": ["å¾©è·", "ãƒªãƒ¯ãƒ¼ã‚¯", "return to work"], "åŠ´ç½": ["åŠ´åƒç½å®³", "æ¥­å‹™ç½å®³", "work injury"], "å®‰å…¨è¡›ç”Ÿ": ["åŠ´åƒå®‰å…¨è¡›ç”Ÿ", "è·å ´å®‰å…¨", "safety and health"], "åŒ–å­¦ç‰©è³ª": ["æœ‰å®³ç‰©è³ª", "å±é™ºç‰©è³ª", "chemical substance", "æœ‰æ©Ÿæº¶å‰¤"], "ç†±ä¸­ç—‡": ["æš‘ç†±éšœå®³", "heat stroke", "ç†±å°„ç—…"], "ãƒ†ãƒ¬ãƒ¯ãƒ¼ã‚¯": ["åœ¨å®…å‹¤å‹™", "ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯", "remote work"], "ä¸¡ç«‹æ”¯æ´": ["æ²»ç™‚ã¨ä»•äº‹ã®ä¸¡ç«‹", "ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹", "work-life balance"], "ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ": ["ãƒ‘ãƒ¯ãƒãƒ©", "ã‚»ã‚¯ãƒãƒ©", "ã„ã˜ã‚", "å«ŒãŒã‚‰ã›", "harassment"], "ã†ã¤ç—…": ["ã†ã¤", "æŠ‘ã†ã¤", "depression", "æ°—åˆ†éšœå®³"], "ç¡çœ ": ["ä¸çœ ", "ç¡çœ éšœå®³", "sleep", "insomnia"], "ç–²åŠ´": ["ç–²ã‚Œ", "å€¦æ€ æ„Ÿ", "fatigue", "æ…¢æ€§ç–²åŠ´"], "å¥³æ€§": ["å¥³æ€§åŠ´åƒè€…", "åƒãå¥³æ€§", "female", "women"], "é«˜é½¢": ["é«˜å¹´é½¢", "ã‚·ãƒ‹ã‚¢", "elderly", "aging"], "å¥åº·çµŒå–¶": ["health management", "å¥åº·æŠ•è³‡", "ãƒ›ãƒ¯ã‚¤ãƒˆ500"], "ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ": ["ãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ", "work engagement", "åƒããŒã„"], "ãƒãƒ¼ãƒ³ã‚¢ã‚¦ãƒˆ": ["ç‡ƒãˆå°½ã", "ç‡ƒãˆå°½ãç—‡å€™ç¾¤", "burnout"]};
    
    const searchInput = document.getElementById('searchInput');
    const synonymsInfo = document.getElementById('synonymsInfo');
    const searchBtn = document.getElementById('searchBtn');
    const modeDescription = document.getElementById('modeDescription');
    
    // ãƒ¢ãƒ¼ãƒ‰èª¬æ˜ã®æ›´æ–°
    document.querySelectorAll('input[name="searchMode"]').forEach(radio => {
      radio.addEventListener('change', updateModeDescription);
    });
    
    function updateModeDescription() {
      const mode = document.querySelector('input[name="searchMode"]:checked').value;
      const descriptions = {
        'exact': 'å®Œå…¨ä¸€è‡´ï¼šå…¥åŠ›ã—ãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨å®Œå…¨ã«ä¸€è‡´ã™ã‚‹è«–æ–‡ã®ã¿æ¤œç´¢ã—ã¾ã™',
        'static': 'ã‚·ã‚½ãƒ¼ãƒ©ã‚¹æ¤œç´¢ï¼šäº‹å‰å®šç¾©ã•ã‚ŒãŸé¡ç¾©èªè¾æ›¸ã‚’ä½¿ç”¨ã—ã¦é–¢é€£èªã‚‚æ¤œç´¢ã—ã¾ã™',
        'ai': 'ğŸ¤– AIæ‹¡å¼µæ¤œç´¢ï¼šClaude AIãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§é–¢é€£ã™ã‚‹å°‚é–€ç”¨èªã‚’ç”Ÿæˆã—ã€ã‚ˆã‚Šåºƒç¯„å›²ã«æ¤œç´¢ã—ã¾ã™'
      };
      modeDescription.textContent = descriptions[mode];
    }
    
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') doSearch();
    });
    
    // é™çš„ã‚·ã‚½ãƒ¼ãƒ©ã‚¹æ¤œç´¢
    function getStaticSynonyms(keyword) {
      const kw = keyword.toLowerCase();
      let synonyms = [keyword];
      
      for (const [key, values] of Object.entries(thesaurus)) {
        if (key.toLowerCase() === kw || key.toLowerCase().includes(kw)) {
          synonyms = synonyms.concat(values);
          synonyms.push(key);
        }
        for (const v of values) {
          if (v.toLowerCase() === kw || v.toLowerCase().includes(kw)) {
            synonyms = synonyms.concat(values);
            synonyms.push(key);
            break;
          }
        }
      }
      
      return [...new Set(synonyms)];
    }
    
    // AIæ‹¡å¼µæ¤œç´¢ï¼ˆNetlify FunctionsçµŒç”±ï¼‰
    async function getAISynonyms(keyword) {
      try {
        const response = await fetch('/.netlify/functions/expand-query', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query: keyword })
        });
        
        if (!response.ok) {
          throw new Error('API request failed');
        }
        
        const data = await response.json();
        return data.synonyms || [keyword];
      } catch (error) {
        console.error('AI synonym expansion failed:', error);
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šé™çš„ã‚·ã‚½ãƒ¼ãƒ©ã‚¹ã‚’ä½¿ç”¨
        return getStaticSynonyms(keyword);
      }
    }
    
    function highlightText(text, keywords) {
      let result = text;
      for (const kw of keywords) {
        const regex = new RegExp('(' + kw.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');
        result = result.replace(regex, '<mark>$1</mark>');
      }
      return result;
    }
    
    async function doSearch() {
      const keyword = searchInput.value.trim();
      if (!keyword) return;
      
      const mode = document.querySelector('input[name="searchMode"]:checked').value;
      let searchTerms = [keyword];
      
      // æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ã¦å‡¦ç†
      if (mode === 'ai') {
        // AIæ‹¡å¼µæ¤œç´¢
        searchBtn.disabled = true;
        searchBtn.textContent = 'AIåˆ†æä¸­...';
        document.getElementById('resultsArea').innerHTML = `
          <div class="loading-state">
            <div class="loading-spinner"></div>
            <p>AIãŒé–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’åˆ†æã—ã¦ã„ã¾ã™...</p>
          </div>
        `;
        
        try {
          searchTerms = await getAISynonyms(keyword);
          showSynonymsInfo(searchTerms, true);
        } catch (error) {
          console.error(error);
          searchTerms = getStaticSynonyms(keyword);
          showSynonymsInfo(searchTerms, false);
        } finally {
          searchBtn.disabled = false;
          searchBtn.textContent = 'æ¤œç´¢';
        }
      } else if (mode === 'static') {
        // é™çš„ã‚·ã‚½ãƒ¼ãƒ©ã‚¹æ¤œç´¢
        searchTerms = getStaticSynonyms(keyword);
        if (searchTerms.length > 1) {
          showSynonymsInfo(searchTerms, false);
        } else {
          synonymsInfo.classList.remove('show');
        }
      } else {
        // å®Œå…¨ä¸€è‡´
        synonymsInfo.classList.remove('show');
      }
      
      // æ¤œç´¢å®Ÿè¡Œ
      const results = articles.filter(article => {
        const text = (article.title + ' ' + article.authors.join(' ')).toLowerCase();
        return searchTerms.some(term => text.includes(term.toLowerCase()));
      });
      
      renderResults(results, searchTerms);
    }
    
    function showSynonymsInfo(terms, isAI) {
      const badge = isAI 
        ? '<span class="ai-badge">ğŸ¤– AIç”Ÿæˆ</span>' 
        : 'ğŸ” ';
      
      synonymsInfo.innerHTML = `
        ${badge}æ¤œç´¢èªã‚’æ‹¡å¼µã—ã¾ã—ãŸï¼ˆ${terms.length}èªï¼‰
        <div class="synonyms-list">
          ${terms.map(t => `<span class="synonym-tag">${t}</span>`).join('')}
        </div>
      `;
      synonymsInfo.classList.add('show');
    }
    
    function renderResults(results, keywords) {
      const area = document.getElementById('resultsArea');
      
      if (results.length === 0) {
        area.innerHTML = `
          <div class="no-results">
            <h3>è©²å½“ã™ã‚‹è«–æ–‡ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</h3>
            <p>åˆ¥ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠè©¦ã—ãã ã•ã„</p>
          </div>
        `;
        return;
      }
      
      let html = `
        <div class="results-header">
          <span class="results-count"><strong>${results.length}</strong> ä»¶ã®è«–æ–‡ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</span>
        </div>
      `;
      
      for (const r of results) {
        const title = highlightText(r.title, keywords);
        const authors = r.authors.slice(0, 3).join(', ') + (r.authors.length > 3 ? ' ä»–' : '');
        const issue = r.year ? `${r.year}å¹´ ${r.volume}å·»${r.number}å·` : '';
        
        html += `
          <a href="${r.link}" target="_blank" class="result-item">
            <div class="result-title">${title}</div>
            <div class="result-meta">
              <span class="result-journal">${r.journal}</span>
              ${authors}${issue ? ' / ' + issue : ''}
            </div>
          </a>
        `;
      }
      
      area.innerHTML = html;
    }
  </script>
</body>
</html>
